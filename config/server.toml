# Rustscape Server Configuration
# This file configures the game server settings

# Server identification
server_name = "Rustscape"
world_id = 1

# Network ports
# Base game port for native TCP clients (actual port = game_port + world_id)
game_port = 43594

# WebSocket port for browser-based clients
websocket_port = 43596

# Management API port for server administration
management_port = 5555

# File paths
# Path to the game cache directory containing cache files
cache_path = "./data/cache"

# Path to data files (configs, scripts, definitions, etc.)
data_path = "./data"

# Server limits
# Maximum number of concurrent players
max_players = 2000

# Game tick rate in milliseconds (600ms = standard RuneScape tick)
tick_rate_ms = 600

# Development options
# Enable development mode (relaxed security, extra logging)
dev_mode = true

# Enable debug logging
debug = true

# Watchdog configuration
# Enable watchdog timer to detect hung game loops
watchdog_enabled = true

# Watchdog timeout in seconds (default 2 hours)
watchdog_timeout = 7200

# PostgreSQL Database configuration
# Environment variables override these values:
# RUSTSCAPE_DATABASE_HOST, RUSTSCAPE_DATABASE_PORT, RUSTSCAPE_DATABASE_USER,
# RUSTSCAPE_DATABASE_PASSWORD, RUSTSCAPE_DATABASE_NAME
[database]
type = "postgres"
host = "localhost"
port = 5432
database = "rustscape"
username = "rustscape"
password = "rustscape_dev_password"
pool_size = 10
# Connection timeout in seconds
connect_timeout = 30
# Enable SSL for database connections (recommended for production)
ssl_mode = "prefer"

# Redis configuration
# Environment variables override these values:
# RUSTSCAPE_REDIS_HOST, RUSTSCAPE_REDIS_PORT, RUSTSCAPE_REDIS_PASSWORD
[redis]
host = "localhost"
port = 6379
password = ""
# Database index (0-15)
database = 0
# Connection pool size
pool_size = 5
# Key prefix for namespacing
key_prefix = "rustscape:"
# Session TTL in seconds (24 hours)
session_ttl = 86400

# RSA Configuration
# WARNING: These are DEVELOPMENT keys only!
# In production, use proper RSA keys and store them securely
# via environment variables: RUSTSCAPE_RSA_MODULUS, RUSTSCAPE_RSA_PRIVATE_EXPONENT
[rsa]
# RSA modulus (N) as hex string - 512-bit for development
modulus = "b57b2a5ec83c10a3e2d5f7c8b9d0e1f2a3b4c5d6e7f8091a2b3c4d5e6f708192a3b4c5d6e7f8091a2b3c4d5e6f7081929a8b7c6d5e4f3a2b1c0d9e8f7a6b5c4d3"

# RSA private exponent (D) as hex string
private_exponent = "4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8091a2b3c4d5e6f7081929a8b7c6d5e4f3a2b1c0d9e8f7a6b5c4d32a1b2c3d4e5f6a7b8c9d0e1f2a3"

# RSA public exponent (E) - standard value
public_exponent = 65537

# Authentication configuration
# Environment variable: RUSTSCAPE_JWT_SECRET
[auth]
# Enable user registration
registration_enabled = true
# Minimum password length
min_password_length = 6
# Maximum login attempts before lockout
max_login_attempts = 5
# Lockout duration in seconds (15 minutes)
lockout_duration = 900
# JWT access token expiration in seconds (24 hours)
access_token_expiration = 86400
# JWT refresh token expiration in seconds (7 days)
refresh_token_expiration = 604800
# Bcrypt cost factor for password hashing
bcrypt_cost = 12
# JWT secret key for signing tokens
# WARNING: Change this in production! Use RUSTSCAPE_JWT_SECRET env var
jwt_secret = "rustscape_dev_jwt_secret_change_in_production_use_env_var"
